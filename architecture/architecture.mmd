graph TD
    %% Raku MCP SDK Architecture
    %% Vertical layout for narrow displays

    %% Styling
    classDef sdk fill:#f0f8ff,stroke:#4682b4,stroke-width:2px;
    classDef user fill:#fff0f5,stroke:#c71585,stroke-width:2px;
    classDef transport fill:#f5fffa,stroke:#2e8b57,stroke-width:2px;
    classDef protocol fill:#fffacd,stroke:#b8860b,stroke-width:2px;

    subgraph UserLayer ["User Application"]
        direction TB
        A["Client App<br>(e.g. IDE)"]
        B["Server App<br>(e.g. DB)"]
    end

    MCP["MCP<br/>(re-exports)"]
    
    A --> MCP
    B --> MCP

    MCP --> Client[MCP::Client::Client]
    MCP --> Server[MCP::Server::Server]
    MCP --> Types

    subgraph Features ["Server Features"]
        direction TB
        Tool[MCP::Server::Tool]
        Resource[MCP::Server::Resource]
        Prompt[MCP::Server::Prompt]
    end

    Server --> Tool
    Server --> Resource
    Server --> Prompt

    subgraph Protocol ["Protocol & Transport"]
        direction TB
        JSONRPC[MCP::JSONRPC]
        Types[MCP::Types]
        Transport["Transport Role<br/>MCP::Transport::Base::Transport"]
        Stdio["MCP::Transport::Stdio::StdioTransport"]
        HTTP["MCP::Transport::StreamableHTTP"]
    end

    Client --> JSONRPC
    Server --> JSONRPC
    JSONRPC --> Types
    
    Client --> Transport
    Server --> Transport
    Transport -.-> Stdio
    Transport -.-> HTTP
    
    Tool -.-> Types
    Resource -.-> Types
    Prompt -.-> Types

    %% Apply classes
    class A,B user;
    class MCP,Client,Server,Tool,Resource,Prompt sdk;
    class JSONRPC,Types protocol;
    class Transport,Stdio,HTTP transport;
